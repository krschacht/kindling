
<div class="topic_view">

  <% if @topic %>
    <%= render :partial => "topics/topic", 
               :object  => @topic,
               :locals  => { :show_forum_tree => true } %>
  <% end %>

  <%= render :partial => "posts/post", :object => @post %>
  
  
  <% if current_user.moderator?  || ( current_user == @post.author && @post.created_at + 1.hour > Time.now ) %>

    <form action="/posts/edit/<%= @post.id %>" method="post" name="post_form">
      <textarea name="post[body]" rows="8" cols="50" class="post_compose_body"><%= @post.body %></textarea>
      <div>
        <%= js_button "Save Changes", 
              :js    => "document.post_form.submit();" %>
      </div>
    </form>
          
  <% else %>
  
    <div class="explanation_msg">
      This post can be edited by the author within 1 hour of posting.
    </div>
    
  <% end %>
  
</div>

