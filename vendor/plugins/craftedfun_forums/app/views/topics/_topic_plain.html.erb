<% show_forum_tree  ||= false %>

<div class="topic_container">
  <div class="topic">

    <% if show_forum_tree %>

      <%= root_forum_tree @forum %>
      <%= link_to( h( @forum.title ), forum_path( @forum ) ) %> &raquo;
      <span id="topic_<%= topic_plain.id %>_title"><%= h( topic_plain.title ) %></span>
      
    <% else %>

      <%= link_to h( topic_plain.title ),
                  topic_path( topic_plain ), 
                  :class => ( topic_plain.last_post_author == current_user ? 'read' : '' ) %> 
      
    <% end %>
    

      
  </div>
  <div class="topic_info">
    <span class="post_count">
      <%= pluralize( topic_plain.post_count, "post" ) %>.
    </span>

    <span class="last_first_post_info">
      last post
      <%= time_ago_in_words( topic_plain.last_post_at ) %> ago
      by 
      <%= link_to( topic_plain.last_post_author.full_name, 
            url_for( :controller => 'profile',
            :id         => topic_plain.last_post_author_id)
          )    if topic_plain.last_post_author %>

    </span>
    <span class="last_first_post_info">
      
      (started by 
      <%= link_to( topic_plain.author.full_name, 
            url_for( :controller => 'profile',
            :id         => topic_plain.author_id)
          )    if topic_plain.author %>)
    </span>
    
  </div>
</div>

